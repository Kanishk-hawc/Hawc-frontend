{
  "version": 3,
  "sources": ["../../@dytesdk/ui-kit/dist/esm/dyte-recording-toggle.entry.js"],
  "sourcesContent": ["import { r as registerInstance, c as createEvent, h, H as Host } from './index-08f4416b.js';\nimport { c as useLanguage, a as defaultIconPack } from './ui-store-9dd5dd86.js';\nimport { S as SyncWithStore } from './index-39fa23f1.js';\n\nconst dyteRecordingToggleCss = \":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}\";\nconst DyteRecordingToggleStyle0 = dyteRecordingToggleCss;\n\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n        r = Reflect.decorate(decorators, target, key, desc);\n    else\n        for (var i = decorators.length - 1; i >= 0; i--)\n            if (d = decorators[i])\n                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst DyteRecordingToggle = class {\n    constructor(hostRef) {\n        registerInstance(this, hostRef);\n        this.dyteAPIError = createEvent(this, \"dyteAPIError\", 7);\n        /** Variant */\n        this.variant = 'button';\n        /** Language */\n        this.t = useLanguage();\n        /** Icon pack */\n        this.iconPack = defaultIconPack;\n        /** Disable the button */\n        this.disabled = false;\n        this.canRecord = false;\n        this.permissionsUpdateListener = () => {\n            this.canRecord = this.meeting.self.permissions.canRecord === true;\n        };\n        this.toggleRecording = async () => {\n            var _a, _b, _c;\n            if (this.isLoading() || this.disabled)\n                return;\n            switch (this.recordingState) {\n                case 'IDLE':\n                    try {\n                        await ((_a = this.meeting) === null || _a === void 0 ? void 0 : _a.recording.start());\n                        return;\n                    }\n                    catch (_d) {\n                        this.dyteAPIError.emit({\n                            trace: this.t('recording.start'),\n                            message: this.t('recording.error.start'),\n                        });\n                    }\n                    return;\n                case 'RECORDING':\n                    try {\n                        await ((_b = this.meeting) === null || _b === void 0 ? void 0 : _b.recording.stop());\n                        return;\n                    }\n                    catch (_e) {\n                        this.dyteAPIError.emit({\n                            trace: this.t('recording.stop'),\n                            message: this.t('recording.error.stop'),\n                        });\n                    }\n                    return;\n                case 'PAUSED':\n                    try {\n                        await ((_c = this.meeting) === null || _c === void 0 ? void 0 : _c.recording.resume());\n                        return;\n                    }\n                    catch (_f) {\n                        this.dyteAPIError.emit({\n                            trace: this.t('recording.resume'),\n                            message: this.t('recording.error.resume'),\n                        });\n                    }\n                    return;\n                case 'STARTING':\n                case 'STOPPING':\n                default:\n                    return;\n            }\n        };\n        this.isLoading = () => {\n            return (this.meeting == null ||\n                this.recordingState === 'STARTING' ||\n                this.recordingState === 'STOPPING');\n        };\n    }\n    connectedCallback() {\n        this.meetingChanged(this.meeting);\n    }\n    disconnectedCallback() {\n        var _a, _b;\n        this.recordingStateUpdateListener &&\n            ((_a = this.meeting) === null || _a === void 0 ? void 0 : _a.recording.removeListener('recordingUpdate', this.recordingStateUpdateListener));\n        (_b = this.meeting) === null || _b === void 0 ? void 0 : _b.self.permissions.removeListener('permissionsUpdate', this.permissionsUpdateListener);\n    }\n    meetingChanged(meeting) {\n        if (meeting != null) {\n            this.recordingState = meeting.recording.recordingState;\n            this.permissionsUpdateListener();\n            this.recordingStateUpdateListener = (recordingState) => {\n                this.recordingState = recordingState;\n            };\n            meeting.recording.addListener('recordingUpdate', this.recordingStateUpdateListener);\n            meeting.self.permissions.addListener('permissionsUpdate', this.permissionsUpdateListener);\n        }\n    }\n    getLabel() {\n        switch (this.recordingState) {\n            case 'IDLE':\n                return 'recording.idle';\n            case 'RECORDING':\n                return 'recording.stop';\n            case 'STARTING':\n                return 'recording.starting';\n            case 'STOPPING':\n                return 'recording.stopping';\n            case 'PAUSED':\n                return 'recording.resume';\n            default:\n                return 'recording.loading';\n        }\n    }\n    getIcon() {\n        switch (this.recordingState) {\n            case 'IDLE':\n                return this.iconPack.recording;\n            case 'RECORDING':\n                return this.iconPack.stop_recording;\n            case 'STARTING':\n            case 'STOPPING':\n            default:\n                return this.iconPack.recording;\n        }\n    }\n    render() {\n        if (!this.canRecord)\n            return;\n        return (h(Host, { title: this.t(this.recordingState === 'RECORDING' ? 'recording.stop' : 'recording.idle') }, h(\"dyte-controlbar-button\", { part: \"controlbar-button\", size: this.size, iconPack: this.iconPack, onClick: this.toggleRecording, icon: this.getIcon(), isLoading: this.isLoading(), label: this.t(this.getLabel()), variant: this.variant, disabled: this.disabled })));\n    }\n    static get watchers() { return {\n        \"meeting\": [\"meetingChanged\"]\n    }; }\n};\n__decorate([\n    SyncWithStore()\n], DyteRecordingToggle.prototype, \"meeting\", void 0);\n__decorate([\n    SyncWithStore()\n], DyteRecordingToggle.prototype, \"t\", void 0);\n__decorate([\n    SyncWithStore()\n], DyteRecordingToggle.prototype, \"iconPack\", void 0);\n__decorate([\n    SyncWithStore()\n], DyteRecordingToggle.prototype, \"size\", void 0);\nDyteRecordingToggle.style = DyteRecordingToggleStyle0;\n\nexport { DyteRecordingToggle as dyte_recording_toggle };\n"],
  "mappings": "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",
  "names": []
}
