{
  "version": 3,
  "sources": ["../../@dytesdk/ui-kit/dist/esm/dyte-camera-toggle.entry.js"],
  "sourcesContent": ["import { r as registerInstance, c as createEvent, h, H as Host } from './index-08f4416b.js';\nimport { a as defaultIconPack, c as useLanguage } from './ui-store-9dd5dd86.js';\nimport { S as SyncWithStore } from './index-39fa23f1.js';\n\nconst dyteCameraToggleCss = \":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}:host([data-hidden]){display:none}\";\nconst DyteCameraToggleStyle0 = dyteCameraToggleCss;\n\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n        r = Reflect.decorate(decorators, target, key, desc);\n    else\n        for (var i = decorators.length - 1; i >= 0; i--)\n            if (d = decorators[i])\n                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst DyteCameraToggle = class {\n    constructor(hostRef) {\n        registerInstance(this, hostRef);\n        this.stateUpdate = createEvent(this, \"dyteStateUpdate\", 7);\n        this.videoUpdateListener = ({ videoEnabled }) => {\n            this.videoEnabled = videoEnabled;\n        };\n        this.stageStatusListener = () => {\n            this.stageStatus = this.meeting.stage.status;\n            this.canProduceVideo = this.meeting.self.permissions.canProduceVideo === 'ALLOWED';\n        };\n        this.mediaPermissionUpdateListener = ({ kind, message }) => {\n            if (kind === 'video') {\n                this.cameraPermission = message;\n            }\n        };\n        this.meetingPermissionsUpdateListener = (patch) => {\n            var _a;\n            if ((_a = patch === null || patch === void 0 ? void 0 : patch.media) === null || _a === void 0 ? void 0 : _a.video) {\n                this.canProduceVideo = this.meeting.self.permissions.canProduceVideo === 'ALLOWED';\n            }\n        };\n        /** Variant */\n        this.variant = 'button';\n        /** Icon pack */\n        this.iconPack = defaultIconPack;\n        /** Language */\n        this.t = useLanguage();\n        this.videoEnabled = false;\n        this.canProduceVideo = false;\n        this.cameraPermission = 'NOT_REQUESTED';\n        this.stageStatus = 'OFF_STAGE';\n        this.toggleCamera = () => {\n            var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n            (_a = this.meeting) === null || _a === void 0 ? void 0 : _a.__internals__.logger.info('dyteCameraToggle::toggleCamera', {\n                media: {\n                    video: {\n                        enabled: Boolean((_c = (_b = this.meeting) === null || _b === void 0 ? void 0 : _b.self) === null || _c === void 0 ? void 0 : _c.videoEnabled),\n                        permission: this.cameraPermission,\n                        canProduce: (_f = (_e = (_d = this.meeting) === null || _d === void 0 ? void 0 : _d.self) === null || _e === void 0 ? void 0 : _e.permissions) === null || _f === void 0 ? void 0 : _f.canProduceVideo,\n                    },\n                },\n                webinar: {\n                    stageStatus: (_g = this.meeting) === null || _g === void 0 ? void 0 : _g.stage.status,\n                },\n                livestream: {\n                    stageStatus: (_j = (_h = this.meeting) === null || _h === void 0 ? void 0 : _h.stage) === null || _j === void 0 ? void 0 : _j.status,\n                },\n                moduleExists: {\n                    self: Boolean((_k = this.meeting) === null || _k === void 0 ? void 0 : _k.self),\n                },\n            });\n            if (this.hasPermissionError()) {\n                const permissionModalSettings = {\n                    enabled: true,\n                    kind: 'video',\n                };\n                this.stateUpdate.emit({ activePermissionsMessage: permissionModalSettings });\n                return false;\n            }\n            const self = (_l = this.meeting) === null || _l === void 0 ? void 0 : _l.self;\n            if (self == null || !this.canProduceVideo) {\n                return;\n            }\n            if (self.videoEnabled) {\n                self.disableVideo();\n            }\n            else {\n                self.enableVideo();\n            }\n        };\n    }\n    connectedCallback() {\n        this.meetingChanged(this.meeting);\n    }\n    disconnectedCallback() {\n        var _a, _b, _c, _d, _e, _f, _g;\n        (_a = this.meeting) === null || _a === void 0 ? void 0 : _a.self.removeListener('videoUpdate', this.videoUpdateListener);\n        (_b = this.meeting) === null || _b === void 0 ? void 0 : _b.self.removeListener('mediaPermissionUpdate', this.mediaPermissionUpdateListener);\n        (_d = (_c = this.meeting) === null || _c === void 0 ? void 0 : _c.stage) === null || _d === void 0 ? void 0 : _d.removeListener('stageStatusUpdate', this.stageStatusListener);\n        (_g = (_f = (_e = this.meeting) === null || _e === void 0 ? void 0 : _e.self) === null || _f === void 0 ? void 0 : _f.permissions) === null || _g === void 0 ? void 0 : _g.removeListener('permissionsUpdate', this.meetingPermissionsUpdateListener);\n    }\n    meetingChanged(meeting) {\n        var _a, _b;\n        if (meeting != null) {\n            const { self, stage } = meeting;\n            this.canProduceVideo = this.meeting.self.permissions.canProduceVideo === 'ALLOWED';\n            this.cameraPermission = self.mediaPermissions.video || 'NOT_REQUESTED';\n            this.videoEnabled = self.videoEnabled;\n            this.stageStatus = meeting.stage.status;\n            self.addListener('videoUpdate', this.videoUpdateListener);\n            self.addListener('mediaPermissionUpdate', this.mediaPermissionUpdateListener);\n            stage === null || stage === void 0 ? void 0 : stage.addListener('stageStatusUpdate', this.stageStatusListener);\n            (_b = (_a = meeting === null || meeting === void 0 ? void 0 : meeting.self) === null || _a === void 0 ? void 0 : _a.permissions) === null || _b === void 0 ? void 0 : _b.addListener('permissionsUpdate', this.meetingPermissionsUpdateListener);\n        }\n    }\n    hasPermissionError() {\n        return this.cameraPermission === 'DENIED' || this.cameraPermission === 'SYSTEM_DENIED';\n    }\n    getState() {\n        let tooltipLabel = '';\n        let label = '';\n        let icon = '';\n        let classList = {};\n        let hasError = this.hasPermissionError();\n        let couldNotStart = this.cameraPermission === 'COULD_NOT_START';\n        if (this.videoEnabled && !hasError) {\n            label = this.t('video_on');\n            icon = this.iconPack.video_on;\n        }\n        else {\n            label = this.t('video_off');\n            icon = this.iconPack.video_off;\n            classList['red-icon'] = true;\n        }\n        if (couldNotStart) {\n            tooltipLabel = this.t('perm_could_not_start.video');\n        }\n        else if (this.cameraPermission === 'SYSTEM_DENIED') {\n            tooltipLabel = this.t('perm_sys_denied.video');\n        }\n        else if (this.cameraPermission === 'DENIED') {\n            tooltipLabel = this.t('perm_denied.video');\n        }\n        else {\n            tooltipLabel = this.videoEnabled ? this.t('disable_video') : this.t('enable_video');\n        }\n        return {\n            tooltipLabel,\n            label,\n            icon,\n            classList,\n            showWarning: hasError || couldNotStart,\n            disable: hasError,\n        };\n    }\n    render() {\n        var _a;\n        if (!this.canProduceVideo ||\n            ((_a = this.meeting) === null || _a === void 0 ? void 0 : _a.meta.viewType) === 'AUDIO_ROOM' ||\n            ['OFF_STAGE', 'REQUESTED_TO_JOIN_STAGE'].includes(this.stageStatus)) {\n            return h(Host, { \"data-hidden\": true });\n        }\n        const { tooltipLabel, label, icon, classList, showWarning, disable } = this.getState();\n        return (h(Host, { title: label }, h(\"dyte-tooltip\", { kind: \"block\", label: tooltipLabel, part: \"tooltip\" }, h(\"dyte-controlbar-button\", { part: \"controlbar-button\", size: this.size, iconPack: this.iconPack, class: classList, variant: this.variant, label: label, icon: icon, onClick: this.toggleCamera, showWarning: showWarning, disabled: disable }))));\n    }\n    static get watchers() { return {\n        \"meeting\": [\"meetingChanged\"]\n    }; }\n};\n__decorate([\n    SyncWithStore()\n], DyteCameraToggle.prototype, \"meeting\", void 0);\n__decorate([\n    SyncWithStore()\n], DyteCameraToggle.prototype, \"size\", void 0);\n__decorate([\n    SyncWithStore()\n], DyteCameraToggle.prototype, \"iconPack\", void 0);\n__decorate([\n    SyncWithStore()\n], DyteCameraToggle.prototype, \"t\", void 0);\nDyteCameraToggle.style = DyteCameraToggleStyle0;\n\nexport { DyteCameraToggle as dyte_camera_toggle };\n"],
  "mappings": "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",
  "names": []
}
