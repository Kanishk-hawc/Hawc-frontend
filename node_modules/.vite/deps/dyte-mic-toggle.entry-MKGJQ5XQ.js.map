{
  "version": 3,
  "sources": ["../../@dytesdk/ui-kit/dist/esm/dyte-mic-toggle.entry.js"],
  "sourcesContent": ["import { r as registerInstance, c as createEvent, h, H as Host } from './index-08f4416b.js';\nimport { a as defaultIconPack, c as useLanguage } from './ui-store-9dd5dd86.js';\nimport { S as SyncWithStore } from './index-39fa23f1.js';\n\nconst dyteMicToggleCss = \":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}:host([data-hidden]){display:none}:host(.audioDisabled) :slotted(dyte-icon){--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}\";\nconst DyteMicToggleStyle0 = dyteMicToggleCss;\n\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n        r = Reflect.decorate(decorators, target, key, desc);\n    else\n        for (var i = decorators.length - 1; i >= 0; i--)\n            if (d = decorators[i])\n                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst DyteMicToggle = class {\n    constructor(hostRef) {\n        registerInstance(this, hostRef);\n        this.stateUpdate = createEvent(this, \"dyteStateUpdate\", 7);\n        this.audioUpdateListener = ({ audioEnabled }) => {\n            this.audioEnabled = audioEnabled;\n        };\n        this.stageStatusListener = () => {\n            this.stageStatus = this.meeting.stage.status;\n            this.canProduceAudio = this.meeting.self.permissions.canProduceAudio === 'ALLOWED';\n        };\n        this.mediaPermissionUpdateListener = ({ kind, message }) => {\n            if (kind === 'audio') {\n                this.micPermission = message;\n            }\n        };\n        this.meetingPermissionsUpdateListener = (patch) => {\n            var _a;\n            if ((_a = patch === null || patch === void 0 ? void 0 : patch.media) === null || _a === void 0 ? void 0 : _a.audio) {\n                this.canProduceAudio = this.meeting.self.permissions.canProduceAudio === 'ALLOWED';\n            }\n        };\n        /** Variant */\n        this.variant = 'button';\n        /** Icon pack */\n        this.iconPack = defaultIconPack;\n        /** Language */\n        this.t = useLanguage();\n        this.audioEnabled = false;\n        this.canProduceAudio = false;\n        this.micPermission = 'NOT_REQUESTED';\n        this.stageStatus = 'OFF_STAGE';\n        this.toggleMic = () => {\n            var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;\n            (_a = this.meeting) === null || _a === void 0 ? void 0 : _a.__internals__.logger.info('dyteMicToggle::toggleMic', {\n                media: {\n                    audio: {\n                        enabled: Boolean((_c = (_b = this.meeting) === null || _b === void 0 ? void 0 : _b.self) === null || _c === void 0 ? void 0 : _c.audioEnabled),\n                        permission: this.micPermission,\n                        canProduce: (_f = (_e = (_d = this.meeting) === null || _d === void 0 ? void 0 : _d.self) === null || _e === void 0 ? void 0 : _e.permissions) === null || _f === void 0 ? void 0 : _f.canProduceAudio,\n                    },\n                },\n                webinar: {\n                    stageStatus: (_h = (_g = this.meeting) === null || _g === void 0 ? void 0 : _g.stage) === null || _h === void 0 ? void 0 : _h.status,\n                },\n                livestream: {\n                    stageStatus: (_k = (_j = this.meeting) === null || _j === void 0 ? void 0 : _j.stage) === null || _k === void 0 ? void 0 : _k.status,\n                },\n                moduleExists: {\n                    self: Boolean((_l = this.meeting) === null || _l === void 0 ? void 0 : _l.self),\n                },\n            });\n            if (this.hasPermissionError()) {\n                const permissionModalSettings = {\n                    enabled: true,\n                    kind: 'audio',\n                };\n                this.stateUpdate.emit({ activePermissionsMessage: permissionModalSettings });\n                return false;\n            }\n            const self = (_m = this.meeting) === null || _m === void 0 ? void 0 : _m.self;\n            if (self == null || !this.canProduceAudio) {\n                return;\n            }\n            if (self.audioEnabled) {\n                self.disableAudio();\n            }\n            else {\n                self.enableAudio();\n            }\n        };\n    }\n    connectedCallback() {\n        this.meetingChanged(this.meeting);\n    }\n    disconnectedCallback() {\n        var _a, _b, _c, _d, _e, _f, _g;\n        (_a = this.meeting) === null || _a === void 0 ? void 0 : _a.self.removeListener('audioUpdate', this.audioUpdateListener);\n        (_b = this.meeting) === null || _b === void 0 ? void 0 : _b.self.removeListener('mediaPermissionUpdate', this.mediaPermissionUpdateListener);\n        (_d = (_c = this.meeting) === null || _c === void 0 ? void 0 : _c.stage) === null || _d === void 0 ? void 0 : _d.removeListener('stageStatusUpdate', this.stageStatusListener);\n        (_g = (_f = (_e = this.meeting) === null || _e === void 0 ? void 0 : _e.self) === null || _f === void 0 ? void 0 : _f.permissions) === null || _g === void 0 ? void 0 : _g.removeListener('permissionsUpdate', this.meetingPermissionsUpdateListener);\n    }\n    meetingChanged(meeting) {\n        var _a, _b;\n        if (meeting != null) {\n            const { self, stage } = meeting;\n            this.canProduceAudio = this.meeting.self.permissions.canProduceAudio === 'ALLOWED';\n            this.micPermission = meeting.self.mediaPermissions.audio || 'NOT_REQUESTED';\n            this.audioEnabled = self.audioEnabled;\n            this.stageStatus = meeting.stage.status;\n            self.addListener('audioUpdate', this.audioUpdateListener);\n            self.addListener('mediaPermissionUpdate', this.mediaPermissionUpdateListener);\n            stage === null || stage === void 0 ? void 0 : stage.addListener('stageStatusUpdate', this.stageStatusListener);\n            (_b = (_a = meeting.self) === null || _a === void 0 ? void 0 : _a.permissions) === null || _b === void 0 ? void 0 : _b.addListener('permissionsUpdate', this.meetingPermissionsUpdateListener);\n        }\n    }\n    hasPermissionError() {\n        return this.micPermission === 'DENIED' || this.micPermission === 'SYSTEM_DENIED';\n    }\n    getState() {\n        let tooltipLabel = '';\n        let label = '';\n        let icon = '';\n        let classList = {};\n        let hasError = this.hasPermissionError();\n        let couldNotStart = this.micPermission === 'COULD_NOT_START';\n        if (this.audioEnabled && !hasError) {\n            label = this.t('mic_on');\n            icon = this.iconPack.mic_on;\n        }\n        else {\n            label = this.t('mic_off');\n            icon = this.iconPack.mic_off;\n            classList['red-icon'] = true;\n        }\n        if (couldNotStart) {\n            tooltipLabel = this.t('perm_could_not_start.audio');\n        }\n        else if (this.micPermission === 'SYSTEM_DENIED') {\n            tooltipLabel = this.t('perm_sys_denied.audio');\n        }\n        else if (this.micPermission === 'DENIED') {\n            tooltipLabel = this.t('perm_denied.audio');\n        }\n        else {\n            tooltipLabel = this.audioEnabled ? this.t('disable_mic') : this.t('enable_mic');\n        }\n        return {\n            tooltipLabel,\n            label,\n            icon,\n            classList,\n            showWarning: hasError || couldNotStart,\n            disable: hasError,\n        };\n    }\n    render() {\n        if (!this.canProduceAudio ||\n            ['OFF_STAGE', 'REQUESTED_TO_JOIN_STAGE'].includes(this.stageStatus)) {\n            return h(Host, { \"data-hidden\": true });\n        }\n        const { tooltipLabel, label, icon, classList, showWarning, disable } = this.getState();\n        return (h(Host, { title: label }, h(\"dyte-tooltip\", { kind: \"block\", label: tooltipLabel, part: \"tooltip\" }, h(\"dyte-controlbar-button\", { part: \"controlbar-button\", icon: icon, label: label, size: this.size, iconPack: this.iconPack, variant: this.variant, class: classList, onClick: this.toggleMic, showWarning: showWarning, disabled: disable }))));\n    }\n    static get watchers() { return {\n        \"meeting\": [\"meetingChanged\"]\n    }; }\n};\n__decorate([\n    SyncWithStore()\n], DyteMicToggle.prototype, \"meeting\", void 0);\n__decorate([\n    SyncWithStore()\n], DyteMicToggle.prototype, \"size\", void 0);\n__decorate([\n    SyncWithStore()\n], DyteMicToggle.prototype, \"iconPack\", void 0);\n__decorate([\n    SyncWithStore()\n], DyteMicToggle.prototype, \"t\", void 0);\nDyteMicToggle.style = DyteMicToggleStyle0;\n\nexport { DyteMicToggle as dyte_mic_toggle };\n"],
  "mappings": "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",
  "names": []
}
